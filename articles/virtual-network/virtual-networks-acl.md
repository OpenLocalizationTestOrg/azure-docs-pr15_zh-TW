<properties
   pageTitle="什麼是網路存取控制清單 (ACL)？"
   description="深入了解 Acl"
   services="virtual-network"
   documentationCenter="na"
   authors="jimdial"
   manager="carmonm"
   editor="tysonn" />
<tags
   ms.service="virtual-network"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="03/15/2016"
   ms.author="jdial" />

# <a name="what-is-an-endpoint-access-control-list-acls"></a>什麼是端點存取控制清單 (Acl)？

端點存取控制清單 (ACL) 是增強安全性供您 Azure 部署。 ACL 提供選擇性地允許或拒絕傳輸的虛擬機器端點的能力。 這封包篩選功能提供額外的安全性層級。 您可以指定網路 Acl 只結束點。 您無法指定虛擬網路] 或 [虛擬網路中包含特定子網路 ACL。

> [AZURE.IMPORTANT] 建議使用網路安全性群組 (NSGs)，而不是 Acl 盡可能。 若要進一步瞭解 NSGs，請參閱[什麼是網路安全性群組？](virtual-networks-nsg.md)。

使用 PowerShell 或管理入口網站，可以設定 Acl。 若要使用 PowerShell 設定 ACL 網路，請參閱[管理存取控制清單 (Acl) 使用 PowerShell 端點](virtual-networks-acl-powershell.md)。 若要設定網路 ACL 使用 [管理] 入口網站，請參閱[如何設定設定結束點到虛擬機器](../virtual-machines/virtual-machines-windows-classic-setup-endpoints.md)。

使用網路 Acl，您可以執行下列動作︰

- 選擇性地允許或拒絕的遠端子網路的虛擬機器輸入端點 IPv4 位址範圍內送的流量。

- 黑名單 IP 位址

- 建立多個規則，每個虛擬機器端點

- 指定每個虛擬機器端點超過 50 個 ACL 規則

- 使用規則排序，以確保正確的規則集就會套用 （最低到最高） 指定的虛擬機器端點上

- 指定特定的遠端子網路 IPv4 位址 ACL。

## <a name="how-acls-work"></a>Acl 的運作方式

ACL 是包含規則清單的物件。 當您建立 ACL，並將其套用至虛擬機器端點時，封包篩選會帶您 VM 的主機節點的位置。 這表示遠端 IP 位址的流量會篩選主機節點，而不是相符的 ACL 規則，在您 VM。 這可防止您 VM 花費寶貴的 CPU 循環封包篩選。

建立虛擬機器時，預設 ACL，將封鎖所有內送的流量。 不過，如果端點建立 （連接埠 3389），然後 ACL 修改允許該端點的所有輸入的流量的預設值。 從任何遠端子網路輸入的流量然後允許該端點，需要沒有防火牆佈建。 所有其他的連接埠遭到封鎖輸入流量，除非這些連接埠建立結束點。 依預設為允許輸出流量。

**範例預設 ACL 表格**

| **規則 #** | **遠端子網路** | **結束點** | **允許/拒絕** |
|--------|---------------|----------|-------------|
| 100    | 0.0.0.0/0     | 3389     | 允許      |

## <a name="permit-and-deny"></a>允許或拒絕

您可以選擇性地允許，或建立規則，指定 「 允許 」 或 「 拒絕] 以拒絕網路流量的虛擬機器輸入結束點。 請務必請注意，根據預設，當端點時，所有流量都允許結束點。 因此，請務必瞭解如何建立允許/拒絕規則，並將它們放在適當的優先順序順序，如果您想要微調控制您選擇讓達到虛擬機器端點網路流量。

要考慮的事項︰

1. **沒有 ACL –**依預設建立端點時，我們讓所有的端點。

1. **允許-**當您新增一或多 「 允許 」 的範圍時，則會在預設拒絕所有其他的範圍。 從所允許的 IP 範圍的封包能夠進行通訊的虛擬機器結束點。

1. **拒絕-**當您新增一或多 「 拒絕 」 的範圍時，您會允許所有其他範圍的流量預設。

1. **組合允許或拒絕-**您可以使用 「 允許 」 與 「 拒絕 」 當您想要設想允許或拒絕特定 IP 範圍內的組合。

## <a name="rules-and-rule-precedence"></a>規則與規則的優先順序

網路 Acl 可以設定在特定的虛擬機器結束點。 例如，您可以指定網路 ACL RDP 端點建立虛擬機器存取鎖定特定 IP 位址。 下表顯示授與存取公用虛擬 IPs (Vip) 的某一範圍的 RDP 允許存取權的方式。 所有其他遠端 Ip 會被拒絕。 我們遵循*最低優先*規則順序。

### <a name="multiple-rules"></a>多個規則

在下面的範例中，如果您想要存取 RDP 端點僅允許來自兩個公用 IPv4 位址範圍 （65.0.0.0/8，並 159.0.0.0/8），您可以達成此指定兩個*允許*的規則。 在此情況下，RDP 由虛擬機器中的預設值，因為您可能會想要鎖定的存取權的遠端子網路的 RDP 連接埠。 下列範例顯示授與存取公用虛擬 IPs (Vip) 的某一範圍的 RDP 允許存取權的方式。 所有其他遠端 Ip 會被拒絕。 因為網路 Acl 可以設定的特定虛擬機器端點，存取預設運作。

**範例︰ 多個規則**

| **規則 #** | **遠端子網路** | **結束點** | **允許/拒絕** |
|--------|---------------|----------|-------------|
| 100    | 65.0.0.0/8    | 3389     | 允許      |
| 200    | 159.0.0.0/8   | 3389     | 允許      |

### <a name="rule-order"></a>規則的順序

多個規則可以指定端點，因為必須是以判斷規則的優先順序組織規則的方法。 規則順序指定的優先順序。 網路 Acl 遵循*最低優先*規則順序。 在下面的範例中，在連接埠 80 端點是選擇性地授與存取權只特定 IP 位址範圍。 若要設定此問題，我們已拒絕規則 (規則\#100) 175.1.0.1/24 空間中的地址。 使用 [允許存取 175.0.0.0/8 底下所有其他地址的優先順序 200 然後指定第二個規則。

**範例 – 規則的優先順序**

| **規則 #** | **遠端子網路** | **結束點** | **允許/拒絕** |
|--------|---------------|----------|-------------|
| 100    | 175.1.0.1/24  | 80       | 拒絕        |
| 200    | 175.0.0.0/8   | 80       | 允許      |

## <a name="network-acls-and-load-balanced-sets"></a>網路 Acl 及負載平衡的集

可以指定網路 Acl 負載平衡設定 （LB 設定） 端點上。 如果 ACL 指定 LB 設定，網路 ACL 會套用到所有的虛擬機器中的 LB 設定。 例如，如果 LB 設定會建立包含 「 連接埠 80 」，LB 設定包含 3 Vm 網路 ACL 建立端點上其中 VM 會自動套用至其他 Vm 的 「 連接埠 80 」。

![網路 Acl 及負載平衡的集](./media/virtual-networks-acl/IC674733.png)

## <a name="next-steps"></a>後續步驟

[如何管理存取控制清單 (Acl) 端點使用 PowerShell](virtual-networks-acl-powershell.md)
