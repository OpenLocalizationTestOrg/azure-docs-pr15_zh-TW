<properties 
    pageTitle="訊息的例外狀況的事件集線器 |Microsoft Azure"
    description="Azure 事件集線器訊息例外狀況和建議的動作的清單。"
    services="event-hubs"
    documentationCenter="na"
    authors="sethmanheim"
    manager="timlt"
    editor="" />
<tags 
    ms.service="event-hubs"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="10/14/2016"
    ms.author="sethm" />

# <a name="event-hubs-messaging-exceptions"></a>事件集線器訊息的例外狀況

本文將列出訊息 Api Azure 服務匯流排所產生的例外狀況。 此 API 設定包含事件集線器。 此參照會有所變更，因此檢查更新。

## <a name="exception-categories"></a>例外狀況類別

訊息的 Api 產生的例外狀況，可以分成下列類別，以及相關聯，嘗試修正問題，您可以採取的動作。 請注意的意義與例外狀況的原因可能會因訊息的實體 （[佇列/事件集線器主題中的 [轉送） 的類型︰

1.  編碼錯誤 ([System.ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx)， [System.InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx)， [System.OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx)， [System.Runtime.Serialization.SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx)) 的使用者。 一般動作︰ 嘗試修正之前的程式碼。

2.  設定/設定錯誤 （[Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitynotfoundexception.aspx)、 [System.UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)。 一般動作︰ 檢閱您的設定，並視需要變更。

3.  暫時性的例外狀況 ([Microsoft.ServiceBus.Messaging.MessagingException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx)， [Microsoft.ServiceBus.Messaging.ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx)， [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingcommunicationexception.aspx))。 一般動作︰ 試一次或通知使用者。

4.  其他的例外狀況 （[System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx) [System.TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx)、 [Microsoft.ServiceBus.Messaging.MessageLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagelocklostexception.aspx)、 [Microsoft.ServiceBus.Messaging.SessionLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessionlocklostexception.aspx)）。 一般動作︰ 特定的例外狀況類型;請參閱下一節中的資料表。 

## <a name="exception-types"></a>例外狀況類型

下表列出訊息的例外狀況類型，其原因和備忘稿建議您可以採取的動作。

| **例外狀況類型**                                                                                                                                                                                                                                                                                | **描述/原因/範例**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | **建議的動作**                                                                                                                                                                                                                                                                                                                                                                                                          | **自動/立即重試的注意事項**                                                                                             |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| [「 逾時](https://msdn.microsoft.com/library/system.timeoutexception.aspx)                                                                                                                                                                                                           | 伺服器未回應中指定的時間，由[OperationTimeout](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout.aspx)控制要求的作業。 伺服器可能已完成要求的作業。 會發生此網路或其他基礎結構的延遲。                                                                                                                                                                                                                                                                   | 檢查系統狀態的一致性，然後再試一次必要。                                                                                                                                                                                                                                                                                                                                                            | 重試可能有幫助在某些情況下。將重試邏輯新增至 [程式碼。                                                                      |
| [InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx)                                                                                                                                                                                         | 要求的使用者作業不允許在伺服器或服務。 請參閱例外狀況訊息，如需詳細資訊。 例如，[完成](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.brokeredmessage.complete.aspx)產生此例外狀況，如果**ReceiveAndDelete**模式中收到郵件。                                                                                                                                                                                                                                                                                                     | 核取的程式碼，文件。 請確定是有效的操作。                                                                                                                                                                                                                                                                                                                                         | 重試會幫助。                                                                                                          |
| [OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx)                                                                                                                                                                                       | 嘗試叫用已經關閉，中止或處置的物件上作業。 在某些情況中已經處置環境交易。                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 檢查程式碼，並確定不會呼叫處置的物件上的作業。                                                                                                                                                                                                                                                                                                                                          | 重試會幫助。                                                                                                          |
| [UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx)                                                                                                                                                                                     | [TokenProvider](https://msdn.microsoft.com/library/azure/microsoft.servicebus.tokenprovider.aspx)物件無法取得權杖、 權杖無效，或權杖不含所需執行的作業的宣告。                                                                                                                                                                                                                                                                                                                                                                                                  | 請確定權杖提供者會建立包含正確的值。 核取存取控制服務的設定。                                                                                                                                                                                                                                                                                                   | 重試可能有幫助在某些情況下。將重試邏輯新增至 [程式碼。                                                                      |
| [ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx)<br /> [ArgumentNullException](https://msdn.microsoft.com/library/system.argumentnullexception.aspx)<br />[ArgumentOutOfRangeException](https://msdn.microsoft.com/library/system.argumentoutofrangeexception.aspx) | 方法所提供的一或多個引數無效。 提供給[NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) ] 或 [[建立](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx)URI 包含路徑一致。 提供給[NamespaceManager](https://msdn.microsoft.com/library/azure/microsoft.servicebus.namespacemanager.aspx) ] 或 [[建立](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingfactory.create.aspx)URI 配置不正確。 屬性值大於 32 KB。 | 檢查呼叫的程式碼，並確認是正確的引數。                                                                                                                                                                                                                                                                                                                                                           | 重試會幫助。                                                                                                          |
| [MessagingEntityNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitynotfoundexception.aspx)                                                                                                                                             | 不存在的作業相關聯的實體或已被刪除。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 請確定實體存在。                                                                                                                                                                                                                                                                                                                                                                                              | 重試會幫助。                                                                                                          |
| [MessageNotFoundException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagenotfoundexception.aspx)                                                                                                                                                             | 嘗試收到一則訊息，以特定順序的數字。 找不到這則訊息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 請確定未已收到郵件。 核取 deadletter 佇列中，若要查看是否郵件已被 deadlettered。                                                                                                                                                                                                                                                                                              | 重試會幫助。                                                                                                          |
| [MessagingCommunicationException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingcommunicationexception.aspx)                                                                                                                                               | 用戶端無法連線到事件中心。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 請確定所提供的主機名稱正確無誤且主機是連線到。                                                                                                                                                                                                                                                                                                                                                    | 如果有斷斷續續的連線發生問題，可能有幫助重試]。                                                               |
| [ServerBusyException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.serverbusyexception.aspx)                                                                                                                                                                       | 服務不能在此時間處理要求。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 用戶端可以等候一段時間，然後再試。                                                                                                                                                                                                                                                                                                                                                           | 用戶端可能會在特定時間間隔之後再試一次。 如果重試造成不同的例外狀況，請核取重試行為的例外狀況。 |
| [MessageLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagelocklostexception.aspx)                                                                                                                                                             | 鎖定訊息相關聯的權杖已過期，或找不到鎖定權杖。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 配置訊息。                                                                                                                                                                                                                                                                                                                                                                                                      | 重試會幫助。                                                                                                          |
| [SessionLockLostException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessionlocklostexception.aspx)                                                                                                                                                             | 這個工作階段與相關聯的鎖定會遺失。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 中止[MessageSession](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagesession.aspx)物件。                                                                                                                                                                                                                                                                                           | 重試會幫助。                                                                                                          |
| [MessagingException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx)                                                                                                                                                                         | 一般訊息可能在下列情況中會擲回的例外狀況︰ 嘗試建立使用名稱或屬於不同的實體類型 （例如主題） 的路徑[QueueClient](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.queueclient.aspx) 。 嘗試傳送訊息給大於 256 KB。 伺服器或服務要求處理時發生錯誤。 請例外狀況訊息，如需詳細資訊，參閱。 這通常是一個暫時性的例外狀況。                                                                                                               | 檢查程式碼並確定只序列化的物件會用於郵件內文 （或使用自訂序列化）。 核取支援的值類型的內容和只支援使用類型的文件。 核取 [ [IsTransient](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.istransient.aspx)屬性。 如果這是**true**，您可以重試作業。 | 重試行為未定義，而不可能有幫助。                                                                               |
| [MessagingEntityAlreadyExistsException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentityalreadyexistsexception.aspx)                                                                                                                                   | 嘗試建立實體已由另一個實體該服務命名空間中的名稱。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 刪除現有的實體或選擇不同的名稱，針對要建立實體。                                                                                                                                                                                                                                                                                                                                       | 重試會幫助。                                                                                                          |
| [QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)                                                                                                                                                                 | 訊息的實體達到其允許的大小上限。 如果群組層級的每個消費者已開啟的數目上限接收器 （這是 5），也可能會發生。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 建立實體空間實體或其子佇列接收訊息。                                                                                                                                                                                                                                                                                                                                       | 如果郵件已同時，也許可以協助重試]。                                                           
|
| [SessionCannotBeLockedException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sessioncannotbelockedexception.aspx)                                                                                                                                                 | 若要接受工作階段的特定工作階段 id，但工作階段目前鎖定狀態，另一個用戶端。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 請確定其他用戶端已解除鎖定工作階段。                                                                                                                                                                                                                                                                                                                                                                       | 如果已經發行過渡工作階段，也許可以協助重試]。                                                             |
| [TransactionSizeExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.transactionsizeexceededexception_methods.aspx)                                                                                                                                     | 太多的操作是交易的一部分。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 減少屬於此交易的運算的數目。                                                                                                                                                                                                                                                                                                                                                        | 重試會幫助。                                                                                                          |
| [MessagingEntityDisabledException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingentitydisabledexception.aspx)                                                                                                                                             | 停用的實體上執行階段作業的要求。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 啟動實體。                                                                                                                                                                                                                                                                                                                                                                                                      | 如果已經啟動實體過渡，也許可以協助重試]。                                                             |
| [MessageSizeExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagesizeexceededexception.aspx)                                                                                                                                                     | 訊息內容超過 256 K。 請注意，256 k 限制郵件大小總計，包括系統內容]，[任何.NET 開銷。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 縮小訊息內容，然後再試。                                                                                                                                                                                                                                                                                                                                                         | 重試會幫助。                                                                                                          |
| [TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx)                                                                                                                                                                                      | 環境交易 (*Transaction.Current*) 不正確。 可能已完成或終止。 內部例外狀況可能會提供的其他資訊。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                           | 重試會幫助。                                                                                                          | -
| [TransactionInDoubtException](https://msdn.microsoft.com/library/system.transactions.transactionindoubtexception.aspx)                                                                                                                                                                        | 交易中有疑問，請嘗試作業，或嘗試認可交易，交易會變成有疑問。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 您的應用程式必須處理交易可能已經已確認 （為特殊情況下），此例外狀況。                                                                                                                                                                                                                                                                                                      | -                                                                                                                              |

## <a name="quotaexceededexception"></a>QuotaExceededException

[QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)表示已超過特定的實體的配額。

如果群組層級的每個消費者已開啟的數目上限接收器 (5)，也可能會發生。

### <a name="event-hubs"></a>事件集線器

事件集線器有事件中心每 20 消費者群組的限制。 當您嘗試建立更多時，您會收到[QuotaExceededException](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx)。 

## <a name="timeoutexception"></a>「 逾時 

[「 逾時](https://msdn.microsoft.com/library/system.timeoutexception.aspx)指出使用者啟動的作業花費超過作業逾時。 

### <a name="event-hubs"></a>事件集線器

事件集線器的連接字串，或透過[ServiceBusConnectionStringBuilder](https://msdn.microsoft.com/library/azure/microsoft.servicebus.servicebusconnectionstringbuilder.aspx)為指定逾時。 錯誤訊息本身可能會有所不同，但一定含有逾時值指定為目前的作業。 

### <a name="common-causes"></a>常見的原因

有兩個這項錯誤的常見原因︰ 設定不正確或暫時性服務錯誤。

1. **設定不正確**
   作業逾時可能太小而無法運作的條件。 在用戶端 SDK 作業逾時的預設值為 60 秒。 檢查您的程式碼是否有值設定為 [太小的項目。 請注意網路的 CPU 使用率條件，可能會影響花費的時間，完成的特定作業，作業逾時不為非常小的值。

2. **暫時服務錯誤**
   有時事件集線器服務可能會遇到延遲處理要求。例如，期間高流量。 在這種情況下，您可以重試操作的延遲之後，直到作業是成功。 如果多個失敗之後還是無法相同的作業，請造訪[Azure 服務狀態網站](https://azure.microsoft.com/status/)，以查看是否有任何已知的服務中斷。

## <a name="next-steps"></a>後續步驟

完整的服務匯流排和事件集線器.NET API 參考，請參閱[Azure 參照 MSDN 上](https://msdn.microsoft.com/library/azure/mt419900.aspx)的。
