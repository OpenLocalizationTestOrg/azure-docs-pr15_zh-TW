#<a name="data-management-and-business-analytics"></a>資料管理及商務分析

管理和分析雲端中的資料是一樣重要像其他任何位置。 若要讓您執行此動作，Azure 提供技術範圍使用關聯式及非關聯式資料。 本文會介紹每個選項。 

##<a name="table-of-contents"></a>目錄      

- [Blob 儲存體](#blob)
- [虛擬機器中執行 DBMS](#dbinvm)
- [SQL 資料庫](#sqldb)
    - [SQL 資料同步處理](#datasync)
    - [SQL 資料報告使用虛擬機器](#datarpt)
- [資料表儲存體](#tblstor)
- [Hadoop](#hadoop)

## <a name="blob"></a>Blob 儲存體

Word 」 blob 」 是簡稱為 「 二進位大型物件 」，並完全描述哪些 blob 是︰ 二進位資訊的集合。 尚未即使他們是簡單，blob 是很實用。 [圖 1](#Fig1) ] 顯示 Azure Blob 儲存體的基本概念。

<a name="Fig1"></a>![二進位大型物件的圖表][blobs]
 
**圖 1: Azure Blob 儲存體儲存容器中的二進位資料-blob。**

若要使用二進位大型物件，您可以先建立 Azure*儲存體帳戶*。 在此，您可以指定 Azure 資料中心，以儲存您建立使用此帳戶的物件。 無論它存在，您建立的每個 blob 所屬的一些容器，在您儲存的帳戶。 若要存取 blob，應用程式提供與表單的 URL:

http://&lt;*StorageAccount*&gt;.blob.core.windows.net/&lt;*容器*&gt;/&lt;*BlobName*&gt;

&lt;*StorageAccount* &gt;是建立新的儲存空間帳戶時，所指派的唯一識別碼時&lt;*容器*&gt;和&lt; *BlobName* &gt;是特定的容器和 blob 該容器內的名稱。 

Azure 提供兩種不同的二進位大型物件。 有下列選擇︰

- *封鎖*blob，每一種最多可以包含最多 200 gb 的資料。 建議的名稱，為區塊 blob 分成區塊的某些數字。 如果傳輸區塊 blob 時，發生失敗，一可以繼續使用最新的區塊，而不是重新傳送整個 blob。 封鎖二進位大型物件的方法很一般儲存空間，而是最常用的 blob 類型今天。

- *頁面*blob，可在一個 tb。 頁面 blob 專為隨機的存取權，並，因此每個分成多個頁面。 應用程式，就可以讀取和寫入個別頁面隨機 blob 項目。 中 Azure 虛擬機器中，例如 Vm 您建立作為頁面 blob 持續存放同時 OS 及資料磁碟。

無論您選擇封鎖 blob 或頁面二進位大型物件時，應用程式可以存取 blob 資料數種不同的方式。 下列選項︰

- 直接透過 RESTful (亦即 HTTP 為基礎) 來存取通訊協定。 Azure 應用程式和外部應用程式，包括應用程式執行內部部署，可以使用這個選項。
- 使用 Azure 儲存用戶端文件庫，提供更多開發人員易於介面原始 RESTful blob 存取通訊協定的上方。 同樣地，同時 Azure 的應用程式和外部應用程式可存取 blob 使用此文件庫。
- 使用 Azure 磁碟機，可讓頁面 blob 視為 NTFS 檔案系統的本機磁碟機 Azure 應用程式的選項。 應用程式、 頁面 blob 看起來像使用標準檔案 I/O 存取一般 Windows 檔案系統。 事實上，讀取，並將會傳送給基礎頁面 blob 實作 Azure 磁碟機。 

若要防止硬體失敗，並改善可用性，每個 blob Azure 資料中心中的三個電腦上複寫。 Blob 寫入更新所有的三份數，讓更新讀取就不會看到不一致的結果。 您也可以指定的 blob 的資料複製到相同的地理但至少 500 英哩離開的另一個 Azure 資料中心。 複製，稱為*地理複寫*、 條件的變化的更新在幾分鐘內 blob，並很有用的損毀修復。

二進位大型物件中的資料也都可以透過 Azure*內容傳遞網路 」 (CDN)*。 快取的 blob 資料數十種世界各地的伺服器複本，CDN 可加速存取重複存取的資訊。 

一樣簡單，blob 是在許多情況下正確的選擇。 儲存和串流視訊及音訊是明顯的範例，備份和其他類型的資料封存。 開發人員也可以使用 blob 按住任何一種他們喜歡的非結構化資料。 無法儲存和存取二進位資料的簡單方法是相當實用。


## <a name="dbinvm"></a>虛擬機器中執行 DBMS

多個應用程式今天依賴某種資料庫管理系統 (DBMS)。 例如 SQL Server 關聯式系統是最常用的選項，但非關聯性的解決方法，通常稱為*NoSQL*技術，取得更多熱門每一天。 若要讓雲端應用程式，請使用這些資料管理選項，Azure 虛擬機器可讓您執行 DBMS (關聯式或 NoSQL) VM 中。 [圖 2](#Fig2)顯示外觀將 SQL server。

<a name="Fig2"></a>![虛擬機器中的 SQL Server 的圖表][SQLSvr-vm]
 
**圖 2︰ 執行 DBMS VM 中, 提供的二進位大型物件的持續讓 Azure 虛擬機器。**

開發人員和資料庫系統管理員，這種情況看起來很像在自己的資料中心執行相同的軟體。 在此處所示的範例中，請執行個體，可以使用幾乎所有的 SQL Server 的功能，，而且您擁有完整的系統管理系統的存取權。 您也可以負責管理資料庫伺服器，當然，就如同本機執行。

[圖 2](#Fig2) ] 顯示，資料庫會儲存在伺服器以的 VM 的本機磁碟上顯示。 實際上，不過，每個這些磁碟寫入 Azure blob。 （很類似舊您自己的資料中心中使用多有如 LUN blob。）與任何 Azure blob，其中包含的資料複製三次內的資料中心時，如果您要求地理複製到相同的區域中的另一個資料中心。 您也可使用選項，例如 SQL Server 資料庫的可靠性鏡像。 

使用 SQL Server VM 中的另一個方法是建立混合式應用程式中，資料所在 Azure 上的應用程式邏輯執行內部部署時。 例如，這可能意義時執行多個位置，或在不同的行動裝置上的應用程式必須共用相同的資料。 若要讓雲端資料庫及內部部署邏輯簡單之間的通訊，組織可以建立自己的內部部署資料中心 Azure 資料中心之間的虛擬私人網路 (VPN) 連線使用 Azure 虛擬網路。


## <a name="sqldb"></a>SQL 資料庫

許多人，在 VM 執行 DBMS 是覺得管理雲端中的結構化的資料的第一個選項。 它不唯一的選擇，也不是永遠的最佳選擇。 在某些情況下，管理服務 (PaaS) 方法為使用單一平台上的資料更有意義。 Azure 提供稱為 SQL 資料庫，可讓您的關聯式資料執行這個動作的 PaaS 技術。 [圖 3](#Fig3)說明此選項。 

<a name="Fig3"></a>![SQL 資料庫的圖表][SQL-db]
 
**圖 3: SQL 資料庫] 會提供共用的 PaaS 關聯式儲存服務。**

SQL 資料庫並未提供每一位客戶自己的 SQL Server 的實體執行個體。 不過，會提供多租用戶服務，與每位客戶邏輯 SQL 資料庫伺服器。 所有的客戶共用服務所提供的計算，儲存空間容量。 如同 Blob 儲存體，SQL 資料庫中的所有資料都儲存在 Azure 資料中心，內建高可用性 (HA) 提供您資料庫中的三個不同的電腦上。

應用程式，SQL 資料庫看起來很像 SQL Server。 應用程式可以提出 SQL 查詢關聯式表格、 使用 T SQL 預存程序，並執行交易橫跨多個資料表。 與應用程式存取 SQL 資料庫中使用表格式資料流 (TDS) 通訊協定，相同的通訊協定用來存取 SQL Server，因為使用資料使用實體架構、 ADO.NET、 JDBC 和其他熟悉的資料存取介面。 

但 SQL 資料庫執行 Azure 資料中心的雲端服務，因此您不需要管理系統的實體特性，例如磁碟使用下列任一。 您也不需要擔心更新軟體或處理其他低層級的系統管理工作。 每個客戶組織仍控制項本身的資料庫，當然，包括其結構描述和使用者的登入，但例行系統管理工作的完成您。 

當 SQL 資料庫看起來更像是 SQL Server 應用程式時，它不會完全相同的實體或虛擬機器上執行 DBMS。 在共用的硬體上執行，因為其效能會隨著負荷的硬體上所有的客戶。 這表示的效能，說 SQL 資料庫中的預存程序可能會有所不同從一天到下一步]。 

現在，SQL 資料庫可讓您建立資料庫，保留最多為 150 gb。 如果您需要使用較大的資料庫，服務會提供一個名為*同盟*選項。 若要這麼做，資料庫管理員確認建立兩個或多個*同盟成員*，都會是不同的資料庫中使用自己的結構描述。 資料橫跨這些成員通常稱為*sharding*，以指定唯一的*同盟索引鍵*的每一個成員的項目。 應該目標應用程式的問題 SQL 查詢此藉由識別同盟成員查詢的同盟索引鍵的資料。 這個選項可讓傳統的關聯式方式使用大量的資料。 如往常有取捨;查詢和交易都不可以跨越同盟成員執行個體。 但是關聯式 PaaS 服務是最佳的選擇，且可接受這些折衷方案，使用 SQL 同盟可以很好的解決方案。

SQL 資料庫可供執行 Azure 或其他位置，例如您的內部部署資料中心的應用程式。 這可讓您更適合需要關聯式資料的雲端應用程式，以及內部部署的應用程式，可以儲存在雲端的資料。 行動應用程式可能會依賴管理共用關聯式資料，例如，可能會以 SQL 資料庫的世界各地的多個業者可以執行的庫存應用程式。

SQL 資料庫思考引發明顯 （與重要） 的問題︰ 當應該您執行 SQL Server VM，和時 SQL 資料庫較佳的選擇？ 如同以往，有折衷方案，因此，最好的方法，是取決於您的需求。 

思考的其中一個簡單的方法是，為新的應用程式時 VM 中的 SQL Server 時，較佳的選擇您要移動現有的內部部署至雲端的應用程式檢視 SQL 資料庫。 也可以查看此決策更細緻的方式，不過有幫助。 例如，SQL 資料庫是更容易使用，因為沒有最小設定與管理。 但在 VM 執行 SQL Server 能更可預測效能-不是共用的服務-，也支援與 SQL 資料庫的較大非聯盟資料庫。 仍然，SQL 資料庫提供資料和處理的內建的複寫有效率地提供高可用性 DBMS 極少的工作。 SQL Server 可讓您更多的控制及一組廣泛的選項，而 SQL 資料庫會更容易管理設定並大幅小於工作。

最後，請務必要 SQL 資料庫並未提供 Azure 只 PaaS 資料服務。 Microsoft 合作夥伴提供者以及其他選項。 例如，ClearDB 提供 MySQL PaaS 提供，而 Cloudant 銷售 NoSQL 選項。 PaaS 資料服務在許多情況下，正確的方案，所以資料管理此方法是 Azure 很重要的一部分。


### <a name="datasync"></a>SQL 資料同步處理

時 SQL 資料庫會維持單一 Azure 資料中心內的每個資料庫的三個複本，請將它不會自動 Azure 資料中心之間複製資料。 不過，它提供 SQL 資料同步處理，您可以使用執行此動作的服務。 [圖 4](#Fig4)顯示此所呈現的外觀。

<a name="Fig4"></a>![SQL 資料同步處理的圖表][SQL-datasync]
 
**圖 4: SQL 資料同步處理其他 Azure 中的資料與同步處理 SQL 資料庫中的資料和內部部署資料中心。**

如圖所示，SQL 資料同步處理可以同步處理資料的不同位置。 假設您執行的應用程式在多個 Azure 資料中心，例如，儲存在 SQL 資料庫的資料。 若要同步處理的資料，您可以使用 SQL 資料同步處理。 SQL 資料同步處理也可以同步處理 Azure 資料中心 」 和 「 執行中的內部部署資料中心的 SQL Server 執行個體之間的資料。 這可能是很適合用於維護內部部署的應用程式所使用的資料的本機複本和 Azure 上執行應用程式使用雲端複本。 它不會顯示在圖表中，雖然 SQL 資料同步處理也用於同步處理 SQL 資料庫與執行 VM Azure 或其他位置中的 SQL Server 之間的資料。

同步處理雙向，而您判斷完全什麼資料已同步處理，並在完成的頻率。 （資料庫之間的同步處理不原子，不過-會永遠至少有些延遲）。使用，不過設定 SQL 資料同步處理的同步處理是完全設定導向;沒有撰寫程式碼。


### <a name="datarpt"></a>SQL 資料報告使用虛擬機器

資料庫中包含的資料，只要有人可能要使用該資料建立報表。 Azure 可以執行 SQL Server Reporting Services (SSRS) 中 Azure 虛擬機器中，這是功能相當於執行 SQL Server Reporting Services 內部部署。 然後您可以使用 SSRS Azure SQL 資料庫中儲存的資料上執行報表。  [圖 5](#Fig5)顯示程序的運作方式。

<a name="Fig5"></a>![SQL 報告的圖表][SQL-report]
 
**圖 5: SQL Server Reporting Services 執行 Azure 虛擬機器中提供 SQL 資料庫中的資料的報表的服務。.**

使用者可以看到報表之前，其他人可定義什麼報告看起來應該像 （步驟 1）。 使用上 VM SSRS，這可以使用兩種工具︰ SQL Server Data Tools、 組件的 SQL Server 2012 或先前的商業智慧 (BI) 開發 Studio。 如同 SSRS，這些報表定義表示報表定義語言 (RDL) 中。 建立報表的 RDL 檔案之後，他們是上傳至雲端 （步驟 2） VM。 報表定義現在可供使用。

接下來，應用程式的使用者存取報表 （步驟 3）。 應用程式的連絡人若要取得其所需的資料的 SQL 資料庫或其他資料來源的 SSRS vm （步驟 4），傳遞此要求 （步驟 5）。 SSRS 使用這項資料和相關 RDL 檔案來呈現報表 （步驟 6 中），然後傳回報表應用程式 （步驟 7），其顯示給使用者 （步驟 8）。

內嵌在應用程式中的報表，示，此案例不是唯一的選項。 您也可在報表管理員 VM，VM，在 SharePoint 上或以其他方式檢視報表。 報表也可以結合，以包含連結到另一份報表。

Azure VM 上的 SSRS 可讓您在雲端中的報表解決方案的完整功能。 報表可以使用任何支援 SSRS 的資料來源。 應用程式和報表可以包含內嵌程式碼或支援自訂行為的組件。 執行報表和呈現都快速，因為報表伺服器內容和引擎同時執行相同的虛擬伺服器上。



## <a name="tblstor"></a>資料表儲存體

關聯式資料可以在許多情況下，但不一定正確的選擇。 如果您的應用程式需要快速又簡單的存取權有大量的彈性結構化資料，例如，關聯式資料庫可能不佳。 NoSQL 技術有可能是較佳的選項。

Azure 資料表儲存體是這種 NoSQL 方法範例。 其名稱，還是資料表儲存體不支援標準關聯的資料表。 不過，它會提供所謂的*鍵值儲存*一組資料關聯特定的鍵，然後讓應用程式存取該資料來提供金鑰。 [圖 6](#Fig6) ] 說明基本概念。

<a name="Fig6"></a>![資料表儲存體的圖表][SQL-tblstor]
 
**圖 6: Azure 資料表儲存體是提供快速簡單的存取權的大量資料的鍵值存放區。**

二進位大型物件，例如每個資料表是 Azure 儲存體帳戶相關聯。 表格也稱為更像 blob，與表單的 URL

http://&lt;*StorageAccount*&gt;.table.core.windows.net/&lt;*表格名稱*&gt;

如圖所示，每個資料表分為磁碟分割，每一種可在不同的電腦儲存的某些數字。 （這是一種 sharding，如同 SQL 同盟。）Azure 應用程式和執行其他地方的應用程式可以存取表格，使用 [RESTful OData 通訊協定] 或 [Azure 儲存用戶端文件庫。

資料表中的每個資料分割保存*實體*，每個包含多達 255*屬性*某些數的字。 每個屬性有一個名稱、 類型 （例如二進位、 Bool、 DateTime、 Int、 或字串） 和值。 與不同的關聯性的儲存空間，這些表格有沒有固定的結構描述，而且之相同資料表中的不同，因此實體最多可以包含不同類型的屬性。 一個實體可能只包含時相同的資料表中的另一個實體有包含客戶識別碼數字以及信用卡評等的兩個 Int 屬性的名稱，例如，字串屬性。

若要識別表格中的特定實體，應用程式提供的實體索引鍵。 索引鍵有兩個部分︰ 識別特定的磁碟分割及識別磁碟分割內的實體一*列按鍵*以*分割索引鍵*。 [圖 6](#Fig6)] 中，例如 [用戶端要求的磁碟分割鍵 A 和列鍵 3 實體和資料表儲存體傳回該實體，包括所有其包含的內容。

此結構可讓表格大-單一資料表可以包含最多 100 個資料-tb 並可讓快速存取所包含的資料。 它也會限制，但是。 例如，沒有橫跨資料表或甚至是單一資料表中的資料分割的交易更新支援。 更新至資料表一組只將不可部分完成的交易分組，如果所有相關的實體位於相同的磁碟分割。 那里也不能查詢的資料表根據值的屬性，也無法連接支援橫跨多個資料表。 且與關聯式資料庫，不同的資料表不支援預存程序。

Azure 資料表儲存體是適合需要快速、 便宜的存取權的大量彈性結構化資料的應用程式。 例如，網際網路應用程式儲存多個使用者的設定檔資訊可能會使用表格。 快速存取請務必在此情況下，而且應用程式可能不需要 SQL 的完整功能。 取得速度和大小放棄這項功能可以有時意義，且資料表儲存體究竟是只是正確的方案的一些問題。


## <a name="hadoop"></a>Hadoop

組織必須已表明建置資料倉儲。 這些集合的最常儲存關聯式表格中的資訊可讓您使用和了解從資料中許多不同的方式。 SQL server 執行個體，則常見使用工具，例如 SQL Server Analysis Services 執行此動作。

但假設您想要執行的非關聯式資料分析。 您的資料可能需要多個表單︰ 從醫療診斷裝置和其他圖像的感應器或 RFID 標記，伺服器陣列，點選流向資料所產生的 web 應用程式中的記錄檔中的資訊。 此資料時，也可能會很大，傳統資料倉庫有效地使用太大。 大型資料問題如下所示，少數幾年前，現在變得很常見。

若要分析的顯示較大的資料，我們產業主要的需求，於單一方案︰ 開啟來源技術 Hadoop。 Hadoop 執行叢集上的實體或虛擬機器分配其運作方式跨那些電腦的資料，並處理該平行。 若要使用的其他電腦 Hadoop 有，更快，才能完成上述程序使用，會執行。

這類問題是公用雲端自然最適大小。 而非僅在需要時維護的內部部署伺服器可能閒置太多時間，在雲端執行 Hadoop 可讓您建立 （和率） Vm。 更好的您要分析的 Hadoop 大型資料會建立在雲端，儲存您的四處移動問題。 若要協助您利用這些 synergies，Microsoft 提供 Azure Hadoop 服務。 [圖 7](#Fig7)顯示這項服務的最重要的元件。

<a name="Fig7"></a>![Hadoop 的圖表][hadoop]

**圖 7︰ 在 Azure Hadoop 執行 MapReduce 工作處理同時使用多個虛擬機器中的資料。**

若要使用 Azure Hadoop，您第一次要求建立 Hadoop 叢集，這個雲端平台，指定您需要的 Vm 數目。 自行設定 Hadoop 叢集非一般工作，而，因此可讓您執行的 Azure 意義。 當您完成使用叢集，您將它關閉。 有不需要計算資源的不使用工資。

Hadoop 應用程式，通常稱為*工作*中，使用稱為*MapReduce*程式設計模型。 如圖所示，MapReduce 工作邏輯同時執行跨多個 Vm。 以處理資料平行、 Hadoop 可以比單一機器解決方案更快速分析資料。

Azure，在資料工作處理 MapReduce 通常保留在 blob 儲存體。 不過，在 [Hadoop，MapReduce 工作預期會儲存在*Hadoop 分散式檔案系統 (HDFS)*中的資料。 HDFS 很類似 Blob 儲存體中的一些方式。它會將複製資料跨多個實體伺服器，例如。 而不是複製這項功能，請在 Azure Hadoop 改為公開 Blob 儲存體透過 HDFS API，如圖所示。 時 MapReduce 工作中的邏輯認為它存取一般 HDFS 檔案，工作實際上使用資料串流以便從二進位大型物件。 並為支援大小寫的多個工作執行相同資料的位置，在 Azure Hadoop 也允許資料複製到完整 HDFS blob Vm 中執行。 

MapReduce 工作會經常寫入 java today、 Hadoop Azure 上的支援的一種方法。 Microsoft 也新增了其他語言版本，包括 C#、 F # 和 JavaScript 建立 MapReduce 作業。 目標是要讓此大型資料技術較大型群組的開發人員更輕鬆地存取。

以及 HDFS，MapReduce Hadoop 包含其他技術，讓分析資料，而不需要自行撰寫 MapReduce 工作的人員。 例如，豬是專為登錄區提供稱為 HiveQL 的類似 SQL 語言時，分析顯示較大的資料，高層級語言。 豬和登錄區實際產生 MapReduce 處理 HDFS 資料的工作，但它們隱藏複雜的使用者。 同時會提供 Hadoop Azure 上。

Microsoft Excel 也提供 HiveQL 驅動程式。 使用 Excel 增益集，商務分析師可以直接從 Excel 中建立 HiveQL 查詢 （和 MapReduce 工作） 然後 [處理程序，以視覺化方式呈現結果使用 PowerPivot 和其他 Excel 工具。 Hadoop Azure 上的包含其他技術，例如學習文件庫 Mahout、 圖形採礦系統韁繩，及其他功能的電腦。

顯示較大的資料分析很重要，，因此 Hadoop 也很重要。 為上 Azure，以及連結熟悉的工具，例如 Excel 受管理的服務提供 Hadoop Microsoft 旨在進行這項技術廣泛的使用者存取。

更多人，所有類型的資料很重要。 這是為什麼 Azure 包含一系列的資料管理及商務分析選項。 您嘗試建立的任何應用程式可能是，您會找出項目會使用這個雲端平台您。

[blobs]: ./media/cloud-storage/Data_01_Blobs.png
[SQLSvr-vm]: ./media/cloud-storage/Data_02_SQLSvrVM.png
[SQL-db]: ./media/cloud-storage/Data_03_SQLdb.png
[SQL-datasync]: ./media/cloud-storage/Data_04_SQLDataSync.png
[SQL-report]: ./media/cloud-storage/Data_05_SQLReporting.png
[SQL-tblstor]: ./media/cloud-storage/Data_06_TblStorage.png
[hadoop]: ./media/cloud-storage/Data_07_Hadoop.png
