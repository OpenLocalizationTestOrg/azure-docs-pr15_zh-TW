<properties
   pageTitle="容量規劃服務布料的轉印圖樣應用程式 |Microsoft Azure"
   description="說明如何找出所需的服務布料的轉印圖樣應用程式的運算節點數目"
   services="service-fabric"
   documentationCenter=".net"
   authors="mani-ramaswamy"
   manager="markfuss"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/14/2016"
   ms.author="subramar"/>


# <a name="capacity-planning-for-service-fabric-applications"></a>容量規劃服務布料的轉印圖樣應用程式


這份文件會指導您如何估計的執行 Azure 服務布料的轉印圖樣應用程式所需的資源 （Cpu RAM 磁碟儲存區）。 通常會隨時間變更資源需求。 當您開發/測試您的服務，然後在您進入生產以及您的應用程式會以常用性需要更多資源時，通常是需要幾個的資源。 當您設計您的應用程式時，思考長期需求，並允許您的服務不按比例縮放以符合高客戶要求的選項。

 當您建立服務布料的轉印圖樣叢集時，您決定類型的虛擬機器 (Vm) 進行設定叢集。 每個 VM 隨附於一段有限的資源形式的 Cpu （核心和速度）、 網路頻寬、 RAM 和磁碟儲存空間。 當您的服務規模擴大時一段時間，您可以升級至 Vm，提供更大的資源，及/或新增更多 Vm 至叢集。 若要執行第二個項目，您必須設計您的服務最初讓它可以利用動態新增至叢集的新 Vm。

某些服務管理 Vm 本身小無資料。 因此，這些服務規劃的容量應該主要著重效能，這表示選取 Vm 適當 Cpu （核心和速度）。 此外，您應該考慮網路頻寬，包括網路傳輸所發生的頻率，以及傳送資料量。 如果您的服務需要執行以及服務使用情況增加，您可以新增更多 Vm 網路要求所有 Vm 跨叢集與負載平衡。

如需管理上 Vm 大量的資料的服務，容量規劃應該著重主要大小。 因此，您應該謹慎 VM 的 RAM 和磁碟儲存空間的容量。 在 Windows 中的虛擬記憶體管理系統可讓應用程式碼看起來像 RAM 磁碟空間。 此外，服務布料的轉印圖樣執行階段提供智慧分頁保存在記憶體只熱門的資料，並將低溫資料移到磁碟。 應用程式，因此可以使用多於實際 VM 上可用的記憶體。 只要有更多的 RAM 提升效能，因為 VM 可以將更多的磁碟儲存空間的 RAM。 您選取的 VM 應有磁碟夠大，無法 VM 上儲存您所要的資料。 同樣地，VM 應該有足夠的 RAM 為您提供您想要的效能。 如果您的服務資料成長一段時間，您可以新增更多 Vm 叢集和分割資料過所有 Vm。

## <a name="determine-how-many-nodes-you-need"></a>決定您需要多少節點

分割您的服務可讓您將服務的資料。 如需有關如何分割的詳細資訊，請參閱[分割服務布料的轉印圖樣](service-fabric-concepts-partitioning.md)。 每個資料分割必須符合單一 VM，但在單一 VM 上放置多個 （小型企業版） 的磁碟分割。 因此，有多個小的磁碟分割區可讓您更大的彈性比有幾個較大的磁碟分割區。 取捨是有很多磁碟分割區會增加，服務布料的轉印圖樣開銷，而且您無法在磁碟分割區執行交易的作業。 如果您的服務代碼經常需要存取在不同的磁碟分割的資料，也會產生更多潛在的網路流量。 設計時您的服務，請小心應該考慮這些優缺點到達有效的資料分割策略。

例如，假設您的應用程式具有單一狀態服務含有您想要放大 DB_Size gb 一年存放區的大小。 您願意新增更多應用程式 （與磁碟分割區） 當您遇到等比級數超出該年。  複寫因子變異數 (RF)，用來決定您的服務的複本數目會影響總 DB_Size。 在所有複本總 DB_Size 是乘以 DB_Size 複寫因素。  Node_Size 代表磁碟空間/RAM 每個您想要使用服務的節點。 獲得最佳效能，DB_Size 叢集，應符合記憶體，是周圍的 VM RAM Node_Size 應該選擇。 配置大於 RAM 容量 Node_Size，您仰賴所提供的服務布料的轉印圖樣執行階段分頁。 因此，效能可能不是最佳如果整個資料會被視為快速鍵 （現在資料分頁/輸出）。 不過，許多服務資料的分數哪裡快速鍵，則加值。

所需的最大效能的節點數目計算方式如下︰

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a>等比級數帳戶

若要計算的預期要收到您的服務，若要放大，除了您開始使用 DB_Size DB_Size 所根據的節點數目。 當您的服務規模擴大時，好讓您不過度佈建的節點數目，然後放大節點的數目。 但的磁碟分割區應該為基礎的最大成長在執行您的服務時所需的節點數目。

請務必有一些額外的電腦隨時都可以使用，您 （例如，如果幾個 Vm 向下） 可以處理任何非預期的波峰上或失敗。  起點時額外的容量應由使用您預期的波峰上，會保留幾個額外的 Vm (5 到 10%額外)。

上述假設單一狀態服務。 如果您有多個狀態的服務，您必須新增至方程式與其他服務相關聯 DB_Size。 或者，您可以計算每個狀態的服務，分別為的節點的數目。  您的服務可能複本或磁碟分割區的不對稱。 請記住磁碟分割區也可能有與其他人的更多資料。 如需有關如何分割的詳細資訊，請參閱[分割文件的最佳作法](service-fabric-concepts-partitioning.md)。 不過的上一個公式是分割及複本無從驗證，所以服務布料的轉印圖樣的複本分布之間節點最佳化的方式。


## <a name="use-a-spreadsheet-for-cost-calculation"></a>使用試算表的成本的計算

現在讓我們來放置公式中的 [一些實數。 [範例試算表](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx)會顯示如何規劃包含三種類型的資料物件的應用程式的容量。 針對每個物件，我們估算其大小，我們希望有多少物件。 我們也選取多少我們希望每個物件類型的複本。 試算表計算記憶體儲存在叢集的總量。

然後，我們輸入的虛擬記憶體大小和每月的成本。 根據虛擬記憶體大小，試算表會告訴您必須使用分割實際配合節點上資料的磁碟分割區中的最小的數目。 您可能會想要的磁碟分割區以容納應用程式的特定計算較大的數字，需要網路流量。 試算表會顯示一至六個增加管理使用者設定檔物件的磁碟分割區的數目。

現在，根據這項資訊，試算表會顯示這是您實際可能 26 節點叢集上取得所需的磁碟分割區與複本的所有資料。 不過，這個叢集想 densely 封裝，因此您可能需要一些其他節點，以容納節點失敗和升級。 試算表也會顯示，有多個 57 節點提供沒有其他值因為您有空白的節點。 同樣地，您可能會想要前往上方 57 節點繼續容納節點失敗和升級。 您可以調整試算表，以符合您的應用程式的特定需求。   

![試算表的成本的計算][Image1]



## <a name="next-steps"></a>後續步驟

請查看[分割服務布料的轉印圖樣服務][10]若要進一步瞭解分割您的服務。



<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before the slash-->
[10]: service-fabric-concepts-partitioning.md
