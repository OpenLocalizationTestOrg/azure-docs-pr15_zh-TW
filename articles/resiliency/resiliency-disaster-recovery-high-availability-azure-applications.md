<properties
   pageTitle="損毀修復和 Azure 應用程式的可用性 |Microsoft Azure"
   description="技術概觀和深度設計高可用性和損毀復原的內建在 Microsoft Azure 應用程式的應用程式的資訊。"
   services=""
   documentationCenter="na"
   authors="adamglick"
   manager="saladki"
   editor=""/>

<tags
   ms.service="resiliency"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="08/18/2016"
   ms.author="aglick"/>

#<a name="disaster-recovery-and-high-availability-for-applications-built-on-microsoft-azure"></a>損毀修復和內建在 Microsoft Azure 應用程式的可用性

##<a name="introduction"></a>簡介

本文著重於 Azure 中執行的應用程式的可用性。 整體策略高可用性也包含損毀修復的外觀。 規劃失敗和雲端中的損毀，要求您快速辨識失敗。 您然後實作符合的容錯應用程式的停機時間的策略。 此外，您必須考慮應用程式可容許不會導致不良商務後果還原時的資料遺失的程度。

大部分的公司說他們準備暫時且大型失敗。 不過，您回答您自己的問題之前，會貴公司排練這些失敗？ 您要測試資料庫，以確定您有正確的程序就地的復原？ 可能不。 這是因為成功損毀修復啟動包含許多規劃與實作這些處理程序架構。 就像許多其他非功能需求，例如 [安全性]，損毀修復很少取得 [預先分析] 和 [需要的時間資源分派。 此外，大部分的公司沒有多餘的容量分散區域的預算。 因此，甚至任務重要的應用程式會經常排除適當損毀復原規劃。

雲端平台，例如 Azure 提供世界各地的地理位置分散的區域。 這些平台也會提供支援可用性和損毀修復狀況的各種不同的功能。 現在，可以指定每個任務的要徑雲端應用程式損毀校訂系統的到期考量。 Azure 有恢復和內建於其服務許多損毀修復。 您必須謹慎，學習這些平台功能，而且補充與應用程式的策略。

此文件大綱必要架構採取步驟，您必須損毀證明 Azure 部署。 然後，您可以執行較大的業務連續性程序。 業務連續性計劃是藍圖繼續作業不良的情況下。 這可能是技術，例如降落的停機服務或自然損毀，例如或電源中斷失敗。 應用程式恢復損毀的是較大的損毀修復程序的子集，NIST 文件中所述︰[資訊技術系統應變計劃指南](https://www.fismacenter.com/sp800-34.pdf)。

下列各節定義不同層級的失敗次數，處理它們，以及支援這些技術的架構的技巧。 這項資訊會提供您損毀修復程序與程序，以確保您損毀的復原策略運作正常並有效率地輸入。

##<a name="characteristics-of-resilient-cloud-applications"></a>有彈性的雲端應用程式的特性

以及架構的應用程式能承擔戰術的層級的功能失敗，它也可容許區域層級的策略系統失敗。 下列各節定義參照整個描述各方面有彈性的雲端服務的文件的術語。

###<a name="high-availability"></a>可用性

高度可用的雲端應用程式實作吸收的相依性，例如雲端平台所提供的受管理服務中斷的策略。 還是的雲端平台的功能可能會失敗，這種方法可讓應用程式出現的預期的功能和非功能系統特性繼續。 這涵蓋頻道 9 視訊數列中，深入[保全︰ 有彈性的雲端架構提供的指導](https://channel9.msdn.com/Series/FailSafe)。

當您實作應用程式時，您必須考慮功能中斷的機率。 此外，請考慮中斷會對商業觀點應用程式在深入探究實作策略之前所產生的影響。 到期日不考慮商務的影響，正中風險條件的機率，實作可成本和可能不必要。

請考慮高可用性汽車類比。 即使品質組件和絕佳工程不會阻止偶爾發生失敗。 例如，當您汽車取得一般的 tire，汽車仍會執行，但它與降級功能運作。 如果您規劃此潛在的項目，您可以使用這些精簡 rimmed 備用輪胎其中一項，直到修復商店。 雖然備用 tire 不允許快速的速度，您可以在此鍵，直到您取代 tire 仍操作車輛。 同樣地，雲端服務的計劃可能遺失的功能可以防止微小問題停機整個應用程式。 這是 true，即使雲端服務必須執行降級的功能。

有高度可用的雲端服務的一些主要特性︰ 可用性、 延展性及容錯能力。 雖然互相這些特性，請務必瞭解各個，以及他們如何參與方案的整體可用性。

###<a name="availability"></a>顯示狀態

可用的應用程式會考慮可使用其基礎結構和相關的服務。 可用的應用程式移除單一失敗點的透過重複及具彈性的設計。 當您範圍擴大到考慮 Azure 中的顯示狀態時，務必瞭解有效的顯示狀態的平台的概念。 有效的可用性根據每個從屬參照的服務及總系統可用性其累計效果的服務等級協定 (SLA)。

系統的可用性為時間間隔，系統將能夠運作的百分比的量值。 例如，可用的網站或工作中的 Azure 至少兩個執行個體 SLA 是角色的 99.95 百分比 （不在 100%)。 它不會測量的效能或這些角色上執行服務的功能。 不過，其他相依服務的各種 Sla 也會影響您的雲端服務的有效的可用性。 系統內移動多組件]，以確保應用程式，您必須採取更仔細 resiliently 符合其使用者的可用性需求。

請考慮下列 Sla Azure 服務使用 Azure 服務︰ 計算、 Azure SQL 資料庫和 Azure 儲存體。

|Azure 服務|SLA   |潛在分鐘停機時間/月 （30 天）|
|:------------|:-----|:----------------------------------------:|
|計算      |99.95%|21.6 分鐘                              |
|SQL 資料庫 |99.99%|4.3 分鐘                              |
|儲存空間      |99.90%|43.2 分鐘                              |

您必須規劃，可能會在不同的時間移往下的所有服務。 在此簡化的範例中，每個月的應用程式可能會向下的分鐘數總和是 108 分鐘。 為 30 天月份有 43,200 的分鐘數總和。 108 分鐘是 30 天月 （43,200 分鐘） 的分鐘數總和.25%。 這可讓您有效可用性 99.75%的雲端服務。

不過，使用本文所述的可用性技巧可以改善此。 例如，如果您設計您的應用程式，以繼續執行 SQL 資料庫無法使用時，您可以從方程式的移除。 這可能表示執行應用程式與精簡功能，因此也要考慮的業務需求。 Azure Sla 的完整清單，請參閱[服務等級協定](https://azure.microsoft.com/support/legal/sla/)。

###<a name="scalability"></a>延展性

延展性直接影響可用性。 提高負載失敗的應用程式不再提供使用。 調整應用程式都能滿足一致的結果，可接受的時間在 windows 中新增的需求。 調整系統時，調整水平或垂直管理增加載入時維護一致的效能。 基本來說，水平縮放新增更多機器 （處理器、 記憶體和頻寬），為相同大小的垂直縮放比例增加時現有機器的大小。 Azure，您必須選取不同的電腦大小為計算的垂直縮放比例選項。 不過，變更電腦大小需要重新部署。 因此，最有彈性的解決方案被專為水平縮放比例。 這是計算，尤其是 true，因為您可以輕鬆地增加的執行個體的任何網頁或工作者角色的使用者數目。 這些額外的執行個體處理增加的流量透過 Azure Web 入口網站、 PowerShell 指令碼或程式碼。 基底上特定的監視計量增加此決策。 在此案例中，使用者效能或指標不會受注意置放在負載。 一般而言，網頁和背景工作角色存放外部的任何狀態。 如此一來彈性的負載平衡與正常處理的執行個體計算的任何變更。 水平縮放也適用於服務，例如 Azure 儲存空間，並不提供分層垂直縮放比例選項。

雲端部署應視為刻度單位的集合。 這個選項可讓應用程式中的使用者處理量需求彈性。 刻度] 單位比較容易以視覺化方式呈現網頁和應用程式的伺服器層級。 這是因為 Azure 已提供無計算節點透過網頁和背景工作的角色。 新增更多計算刻度的部署不會造成任何應用程式狀態管理側效果]，因為計算刻度沒有狀態時。 儲存縮放比例單位負責管理資料分割 （結構化或非結構化）。 儲存的縮放比例單位包括 Azure 資料表分割、 Azure Blob 容器和 Azure SQL 資料庫。 更多個 Azure 儲存體帳戶使用應用程式延展性具有直接的影響。 您必須設計合併多個儲存縮放比例單位 free 雲端服務。 比方說，如果應用程式使用關聯式資料，請到數個 SQL 資料庫分割資料。 如此一來，可讓彈性計算比例單位模型的儲存空間。 同樣地，Azure 儲存體可讓資料分割配置需要計算圖層處理量需求刻意設計的資料。 設計可調整雲端服務的最佳作法的清單，請參閱[設計的大型服務上 Azure 雲端服務的最佳作法](https://azure.microsoft.com/blog/best-practices-for-designing-large-scale-services-on-windows-azure/)。

###<a name="fault-tolerance"></a>容錯能力

應用程式應該假設每個相依雲端功能可以將有些時候時間移往下。 故障容錯應用程式會偵測並曠周圍失敗的項目，若要繼續，並傳回特定時間範圍內正確的結果。 針對暫時性錯誤狀況故障容錯系統會採用重試原則。 更嚴重錯誤，應用程式可以偵測到問題，並無法透過替代的硬體或緊急應變計劃，直到錯誤修正。 可靠的應用程式正確可以管理失敗的一或多個部分，並繼續無法正常運作。 故障容錯應用程式可以使用一或多個設計策略，例如重複、 複寫或降級的功能。

##<a name="disaster-recovery"></a>修復損毀

雲端部署可能會停止運作，因為系統會中斷依存的服務或基礎結構。 在這種情況下業務連續性計劃觸發損毀修復程序。 此程序通常涉及作業人員和自動化程序，以重新啟動應用程式中可用的區域。 需要應用程式使用者、 資料及服務的轉移至新的區域。 還需要使用備份媒體或進行中的複寫。

請考慮比較高可用性]，以可從使用備用一般 tire 復原上一個類比。 相反地，損毀修復涉及汽車在哪裡不再操作汽車當機之後, 所採取的步驟。 在此情況下，最好的方法是找出有效的方式，來變更汽車，呼叫旅遊服務或朋友。 在此案例中，那里可能要將較長時間有所延遲回在旅途中。 還有更多複雜度修復和回到原始的車輛。 以相同的方式，損毀修復到另一個地區是複雜的工作，通常涉及一些停機時間和損失資料。 若要進一步瞭解並評估損毀修復策略，請務必定義兩個字詞︰ 復原時間目標 (RTO) 及修復指向目標 (RPO)。

###<a name="recovery-time-objective"></a>復原時間目標

RTO 是時間的最大配置還原應用程式功能量。 這依據業務需求及相關應用程式的重要性。 要徑商務應用程式需要低 RTO。

###<a name="recovery-point-objective"></a>復原點目標

RPO 會遺失的資料，因為修復程序可接受的時間範圍。 例如，如果 RPO 一小時，您必須完全備份或複寫資料至少每小時。 一旦您替代區域中顯示的應用程式，備份資料可能會遺失達一小時的資料。 RTO，例如重要的應用程式目標設為較小的 RPO。

##<a name="checklist"></a>檢查清單

讓我們來合併彙算本文 （和其[可用性](./resiliency-high-availability-azure-applications.md)和[損毀修復](./resiliency-disaster-recovery-azure-applications.md)Azure 應用程式的相關文件） 中所涵蓋重點。 此摘要做為項目，您應該考慮您自己的可用性及損毀復原規劃檢查清單。 這些是有助於尋找以取得有關實作成功的方案有客戶的最佳作法。

1. 因為每可能會有不同的需求，請進行每個應用程式，風險評定。 部分應用程式與其他人更重要，並想中對齊額外的設計進行損毀修復的成本。
1. 若要定義 RTO 和 RPO 每個應用程式使用這項資訊。
1. 設計失敗，開始使用應用程式架構。
1. 平衡成本、 複雜度與風險時實作高可用性的最佳作法。
1. 實作損毀復原計劃與處理程序。
  * 請考慮跨越到完成雲端中斷的模組層級的失敗次數。
  * 建立備份的所有參照和交易資料的策略。
  * 選擇的多網站損毀復原架構。
1. 定義損毀修復程序、 自動化，以及測試的特定擁有人。 擁有者應管理，並擁有整個程序。
1. 文件處理程序，使其可輕鬆地重複。 雖然有一個擁有者，請多人應該能夠瞭解並遵循緊急中的程序。
1. 訓練實作程序的人員。
1. 使用一般損毀模擬訓練] 及 [驗證程序。

##<a name="summary"></a>摘要

當硬體或應用程式無法 Azure 內時的技巧和管理這些策略會不同於內部部署系統何時發生失敗。 主要原因是雲端解決方案通常分佈於 Azure 的區域，並為不同的服務管理基礎結構上有更多的相依性。 您必須處理使用可用性技術的部分失敗。 若要管理更嚴重的失敗次數，可能是因為損毀事件，使用復原損毀的策略。

Azure 會偵測並處理許多失敗次數，但有許多種需要特定應用程式的策略失敗。 您必須主動準備，並管理應用程式與服務資料的錯誤。

建立您的應用程式可用性及復原計劃，請考慮應用程式的失敗商務的結果。 定義程序、 原則，以及嚴重的事件花的時間之後，還原重要系統的程序、 規劃及認可。 然後，一旦您建立的方案，您無法停止那里。 您必須定期分析、 測試和持續改進計劃根據您的應用程式的產品組合與業務需求，提供給您的技術。 Azure 提供的新功能，並引發新的挑戰，建立強大的承受失敗的應用程式。

##<a name="additional-resources"></a>其他資源

[Microsoft Azure 應用程式的可用性](resiliency-high-availability-azure-applications.md)

[應用程式內建在 Microsoft Azure 損毀修復](resiliency-disaster-recovery-azure-applications.md)

[Azure 恢復技術指南](resiliency-technical-guidance.md)

[概觀︰ 雲端與 SQL 資料庫的業務連續性和資料庫損毀修復](../sql-database/sql-database-business-continuity.md)

[SQL Server Azure 虛擬機器中的商務連絡人的高可用性和損毀復原](../virtual-machines/virtual-machines-windows-sql-high-availability-dr.md)

[有彈性的雲端架構的保全︰ 指南](https://channel9.msdn.com/Series/FailSafe)

[Azure 雲端服務上的大型服務的設計的最佳作法](https://azure.microsoft.com/blog/best-practices-for-designing-large-scale-services-on-windows-azure/)

##<a name="next-steps"></a>後續步驟

本文是一系列的文章著重於損毀修復和 Azure 應用程式的可用性。 本系列文章是[Microsoft Azure 應用程式的可用性](resiliency-high-availability-azure-applications.md)。
