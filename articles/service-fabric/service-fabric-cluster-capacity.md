<properties
   pageTitle="規劃服務布料的轉印圖樣叢集容量 |Microsoft Azure"
   description="服務布料的轉印圖樣叢集容量規劃考量。 Nodetypes、 持續性和可靠性層"
   services="service-fabric"
   documentationCenter=".net"
   authors="ChackDan"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/09/2016"
   ms.author="chackdan"/>


# <a name="service-fabric-cluster-capacity-planning-considerations"></a>服務布料的轉印圖樣叢集容量規劃考量

針對任何生產部署，容量計劃是重要的步驟。 以下是一些項目，您必須考慮的程序的一部分。

- 節點類型叢集必須開始的數字
- 每個節點類型 （大小、 主要、 網際網路圖示，數 Vm 等） 的內容
- 可靠性和持續性的特性叢集

讓我們簡要檢閱這些項目。

## <a name="the-number-of-node-types-your-cluster-needs-to-start-out-with"></a>節點類型叢集必須開始的數字

首先，您必須找出您要建立的叢集將用於以及何種應用程式您打算將這個叢集部署。 如果您不是叢集的目的上的 [清除，您不是最可能還好輸入容量規劃程序。

建立的節點類型叢集必須開始的數目。  每個節點類型] 已對應至虛擬機器縮放比例設定。 每個節點輸入然後可以縮放或向下獨立，有幾組不同的連接埠開啟，並可以有不同的容量指標。 因此節點類型的數字的決策基本上最重要的是下列事項︰

- 您的應用程式是否有多個服務，以及任何需要為公用或網際網路？ 一般的應用程式包含前端閘道器服務接收輸入從用戶端及一或多個後端服務通訊與前端服務。 因此，在此情況下，最後您有兩個以上的節點類型。

- 您的服務 （的應用程式） 有不同的基礎結構需求，例如更大的 RAM 或更高的 CPU 循環嗎？ 例如，讓我們假設您想要部署的應用程式，包括前端服務及後端服務。 開啟網際網路的連接埠的較小 Vm （例如 D2 VM 大小） 可以執行的前端服務。  後端服務，不過，計算大量，必須在較大 Vm （含 VM 大小 D4，D6，D15 等） 的不是網際網路上執行面向。

 在此範例中，雖然您可以決定要將所有服務都放在一個節點類型，但我們建議您將它們叢集兩種節點類型。  這個選項可讓每個節點類型有不同的屬性，例如網際網路連線或虛擬記憶體大小。 獨立，也可以縮放 Vm 數目。  

- 因為您無法預測未來，請與您知道的事項，並決定您的應用程式需要開始使用的節點類型的數。 您永遠可以新增或更新版本中移除節點類型。 服務布料的轉印圖樣叢集必須至少有一個節點類型。

## <a name="the-properties-of-each-node-type"></a>每個節點類型的內容

**節點類型**可以視為等同於雲端服務中的角色。 節點類型定義 VM 大小、 Vm 數和其內容。 服務布料的轉印圖樣叢集中定義的每個節點類型設定為不同的虛擬機器縮放比例設定。 VM 比例集是 Azure 計算可用來部署及管理所設定的虛擬機器集合的資源。 定義為不同 VM 縮放設定，每個節點類型然後可以縮放或向下獨立，有組不同的連接埠開啟，而可以有不同的容量指標。

叢集只能有一個以上的節點類型，但主要節點類型 （由您定義入口網站的第一個） 都必須至少五個 Vm 叢集生產負載所用的 （或至少三個 Vm 測試叢集）。 如果您正在建立叢集使用資源管理員範本，您會發現**是主要**[屬性] 下的節點類型定義。 主要節點類型是節點類型服務布料的轉印圖樣系統服務放置的位置。  

### <a name="primary-node-type"></a>主要節點類型
針對多個節點類型的叢集，您必須選擇其中一個是主索引。 以下是主要節點類型的特性︰

- 取決於您所選擇的持續性層的最小的 Vm 主要節點類型。 持續性層的預設值是青銅。 向下捲動，如持續性層功能及值可能需要較長的詳細資訊。  

- 取決於您所選擇的可靠性層 Vm 主要節點類型的最小數目。 可靠性層的預設值是 「 銀色 」。 向下捲動，如可靠性層功能及值可能需要較長的詳細資訊。

- 服務布料的轉印圖樣系統服務 （例如，叢集管理員服務或圖像 Store service） 會放在主要節點類型，因此可靠性和持續性叢集的由可靠性層值] 及 [選取主要節點類型的持續性層值。

![有兩種節點類型叢集的螢幕擷取畫面 ][SystemServices]


### <a name="non-primary-node-type"></a>非主要節點類型
針對多個節點類型的叢集，有一種主要節點類型且其他的非主要。 以下是非主要節點類型的特性︰

- 此節點類型的最小 Vm 大小取決於您所選擇的持續性層。 持續性層的預設值是青銅。 向下捲動，如持續性層功能及值可能需要較長的詳細資訊。  

- Vm 節點類型的最小數可以是一個。 不過，您應該選擇這個數字，根據您想要執行這個節點類型中的應用程式/服務的複本數目。 您已經部署叢集之後，您可以增加節點類型的 Vm 的數字。


## <a name="the-durability-characteristics-of-the-cluster"></a>持續性的特性叢集

持續性層用來代表系統您 Vm 有 Azure 基礎的權限。 在主要節點類型，此權限可讓服務暫停影響系統服務] 和 [服務狀態的仲裁需求任何 VM 層級的基礎結構要求 （例如 VM 重開機，VM reimage 或 VM 移轉） 布料的轉印圖樣。 非主要節點類型，此權限可讓服務暫停 VM 重開機，VM reimage、 VM 移轉等影響狀態服務中執行的仲裁需求的任何 VM 層級的基礎結構要求布料的轉印圖樣。

此權限被以下列的值︰

- Gold-基礎結構工作可以暫停的持續時間內的 「 ud 」 2 的時數

- 「 銀色 」-基礎結構工作可以暫停 「 ud 」 （這目前未啟用用於每 30 分鐘的持續時間。 一旦啟用這將可在所有的標準 Vm 單一核心和上方）。

- 青銅-沒有權限。 這是預設值。

## <a name="the-reliability-characteristics-of-the-cluster"></a>可靠性特性的叢集

可靠性層用來設定您想要執行這個叢集主要節點類型的系統服務的複本數目。 更多的複本數目、 更可靠的系統服務會位於叢集。  

可靠性層可以採取下列的值。

- 白金-執行系統服務與目標複本集計數 / 9

- Gold-執行系統服務與目標複本集 7 的計數

- 「 銀色 」-執行系統服務與目標複本設定 5 的計數

- 青銅-執行系統服務與目標複本集 3 的計數

>[AZURE.NOTE] 您選擇的可靠性層會決定您的主要節點類型必須要有的節點數目最小值。 可靠性層無關叢集的最大的大小。 您可以有 20 節點叢集，因此執行在青銅可靠性。

 您可以選擇要更新的到另一個從一層叢集可靠性。 執行此動作會觸發叢集升級需要變更系統服務複本設定計數。 升級到叢集，例如新增節點等進行任何其他變更之前，先完成的進度，請等候。 您可以監視服務布料的轉印圖樣總管或執行[取得 ServiceFabricClusterUpgrade](https://msdn.microsoft.com/library/mt126012.aspx)升級的進度

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->
## <a name="next-steps"></a>後續步驟

當您完成您的容量規劃及設定叢集時，請閱讀下列動作︰
- [服務布料的轉印圖樣叢集安全性](service-fabric-cluster-security.md)
- [服務布料的轉印圖樣狀況模型簡介](service-fabric-health-introduction.md)

<!--Image references-->
[SystemServices]: ./media/service-fabric-cluster-capacity/SystemServices.png
