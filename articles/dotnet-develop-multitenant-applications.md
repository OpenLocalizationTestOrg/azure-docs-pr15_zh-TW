<properties
    pageTitle="多租用戶 Web 應用程式模式 |Microsoft Azure"
    description="尋找建築概觀] 與 [設計模式，可說明如何在 Azure 實作多租用戶 web 應用程式。"
    services=""
    documentationCenter=".net"
    authors="wadepickett" 
    manager="wpickett"
    editor=""/>

<tags
    ms.service="active-directory"
    ms.workload="identity"
    ms.tgt_pltfrm="na"
    ms.devlang="dotnet"
    ms.topic="article"
    ms.date="06/05/2015"
    ms.author="wpickett"/>

# <a name="multitenant-applications-in-azure"></a>Azure 中 multitenant 應用程式

所共用的資源，可讓個別使用者，或 「 租用戶，「 若要檢視應用程式，即使是在自己的 multitenant 的應用程式。 適合 multitenant 應用程式的一般案例是在其中所有使用者的應用程式可能會都想要自訂使用者經驗，但否則有相同的基本的業務需求。 大型 multitenant 應用程式的範例是 Office 365、 Outlook.com 和 visualstudio.com。

從應用程式提供者的觀點來看，multitenancy 優點大多與作業與成本效率。 您的應用程式版本可以符合許多租用戶/客戶，讓合併彙算的系統管理工作，例如監控效能調整、 軟體維護與資料備份的需求。

以下提供最重要的目標和需求從提供者的觀點來看的清單。

- **規定**︰ 您必須能夠佈建應用程式的新租用戶。  Multitenant 有太多的租用戶的應用程式，則通常必須啟用自助佈建自動化此程序。
- **維護**︰ 您必須能夠升級應用程式，並執行其他維護工作，多個租用戶使用時。
- **監控**︰ 您必須能夠監視的應用程式隨時識別任何問題，並進行疑難排解。 這包含監控每個租用戶如何使用應用程式。

適當實作 multitenant 應用程式為使用者提供下列優點。

- **隔離**︰ 個別的租用戶的活動不會影響其他租用戶的應用程式的使用。 租用戶無法存取其他人的資料。 您似乎租用戶有專用的應用程式。
- **可用性**︰ 個別的租用戶希望能夠不斷地使用，可能是 SLA 中定義的保證與應用程式。 同樣地，其他租用戶的活動不會影響應用程式的可用性。
- **延展性**︰ 縮放以符合需求的個別的租用戶的應用程式。 目前狀態及其他租用戶的動作，應該不會影響應用程式的效能。
- **成本**︰ 低於執行專用、 單一租用戶的應用程式，因為多 tenancy 啟用共用資源的成本會。
- **自訂**。 自訂不同的方法，例如新增或移除功能、 色彩及標誌、 變更或甚至新增自己的程式碼或指令碼個別租用戶的應用程式的能力。

簡言之，有許多的考量事項，您必須考慮提供彈性的服務，也有目標及一般許多 multitenant 應用程式的需求。 一些可能無法在特定情況下，相關和個別目標和需求的重要性，會在每個案例的不同。 為 multitenant 應用程式的提供者，您也必須目標和需求，例如，會議租用戶的目標和需求、 獲利率、 計費、 多個服務層級、 佈建、 維護監視和自動化。

如需其他設計考量 multitenant 應用程式的詳細資訊，請參閱[裝載多租用戶上的應用程式 Azure][]。 多租用戶軟體為-的-服務 (SaaS) 資料庫應用程式的一般資料結構模式的詳細資訊，請參閱[Azure SQL 資料庫的多租用戶 SaaS 應用程式的設計模式](./sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md)。 

Azure 提供許多功能，可讓您地址金鑰設計 multitenant 系統時所發生的問題。

**隔離**

- 區段網站租用戶，以包含或不含 SSL 通訊的主標題
- 查詢參數的區段網站租用戶
- 在 [背景工作角色的 web 服務
    - 工作者角色。 通常是處理資料的應用程式的後端。
    - 通常是作為主選單應用程式的 web 角色。

**儲存空間**

資料管理，例如 Azure SQL 資料庫或 Azure 儲存體的服務，例如表格服務可提供服務的大量的非結構化資料的儲存空間和 Blob 服務可提供服務給儲存大量的非結構化文字或二進位資料，例如視訊、 音訊和圖像。

- 在適當的 SQL 資料庫保護 Multitenant 資料每個-租用戶 SQL Server 登入。
- 使用應用程式資源所指定的容器層級的存取原則的 Azure 資料表，可以調整權限，而不必新 URL 的使用共用的 access 簽章受保護的資源。
- Azure 佇列的應用程式資源 Azure 佇列通常是用來代表租用戶，磁碟機處理，但也可能會用來發佈佈建或管理所需的工時。
- 服務匯流排佇列推入的應用程式資源的工作，以共用服務，您可以使用單一佇列其中每個租用戶寄件者僅有權限 （如下圖所衍生自發行 ACS 宣告） 至推入該佇列中，請時僅從服務接收器有權從佇列中接收來自多個租用戶的資料。


**連線和安全性服務**

- Azure 服務匯流排位於讓他們的應用程式中改良的小數位數的彈性方式 exchange 郵件和恢復之間的郵件基礎結構。

**網路服務**

Azure 提供多個網路服務的支援驗證]，並改善管理主控應用程式的能力。 這些服務包括下列各項︰

- Azure 虛擬網路可讓您佈建和 Azure 中管理虛擬私人網路 (Vpn)，以及安全地連結的內部部署的 IT 基礎結構。
- 虛擬網路流量管理員可讓您無論他們執行的不同的資料中心世界各地的多個中相同的資料中心，跨多個裝載 Azure 服務載入平衡連入流量。
- Azure Active Directory (Azure AD) 是現代化的其餘服務，提供您的雲端應用程式的身分識別管理和存取控制功能。 Azure AD 用應用程式資源 Azure AD 以讓您輕鬆的驗證及授權使用者來存取您的 web 應用程式和服務時允許驗證及授權，以解析為登出您的程式碼的功能。
- Azure 服務匯流排提供安全通訊的資料傳送功能分散式和混合式裝載應用程式，例如 Azure 之間的通訊應用程式與內部部署的應用程式和服務，而不需要複雜的防火牆與安全性基礎結構。 使用服務公開為結束點的應用程式資源的服務匯流排轉送可能屬於租用戶的學生 （例如，裝載於外部系統，例如內部部署），或可能佈建後專為租用戶 （因為機密、 租用戶專屬的資料會透過這些） 的服務。



**佈建資源**

Azure 提供數種方式佈建新租用戶的應用程式。 若是 multitenant 大量的租用戶的應用程式，則通常需要來啟用自助佈建自動化此程序。

- 工作者角色允許您佈建和取消提供每一租用戶 （例如，當新的租用戶符號或取消） 的資源，收集計量計量使用，以及管理追蹤特定排程的小數位數，或在臨界值的關鍵效能指標跨越回應。 此角色相同也可能會用來發送進行的更新和升級至的方案。
- 可供佈建計算或預先初始化 azure Blob 儲存新的租用戶時提供容器層級存取原則以保護計算資源服務套件，VHD 圖像及其他資源。
- 佈建租用戶的 SQL 資料庫資源的選項包括︰

    -   在 [指令碼 DDL 或內嵌為組件內的資源
    -   SQL Server 2008 R2 DAC 套件，以程式設計方式部署。
    -   複製投影片母片參照資料庫
    -   使用資料庫匯入及匯出至佈建新資料庫檔案。



<!--links-->

[主機多租用戶上的應用程式 Azure 服務]: http://msdn.microsoft.com/library/hh534480.aspx
[Designing Multitenant Applications on Azure]: http://msdn.microsoft.com/library/windowsazure/hh689716
