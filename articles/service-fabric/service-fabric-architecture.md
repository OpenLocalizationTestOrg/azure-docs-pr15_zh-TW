<properties
   pageTitle="服務布料的轉印圖樣架構 |Microsoft Azure"
   description="服務布料的轉印圖樣是用來建立可調整、 可靠且輕鬆地管理應用程式的雲端分散式的系統平台。 本文將示範服務結構架構。"
   services="service-fabric"
   documentationCenter=".net"
   authors="rishirsinha"
   manager="timlt"
   editor="rishirsinha"/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="06/09/2016"
   ms.author="rsinha"/>

# <a name="service-fabric-architecture"></a>服務結構架構

以分層子系統建置服務布料的轉印圖樣。 這些子系統可讓您撰寫的應用程式︰

* 可用性
* 調整
* 可管理
* 測試

下圖顯示的主要子系統服務布料的轉印圖樣。

![服務結構架構的圖表](media/service-fabric-architecture/service-fabric-architecture.png)

在分散式系統中，進行安全叢集的節點之間的通訊功能很重要。 堆疊的底數為傳輸子系統，提供節點之間的通訊安全。 上述傳輸子系統位於同盟子系統，其中不同的節點叢集到單一項目 （命名為 [叢集]），以便服務布料的轉印圖樣偵測失敗、 執行前置字元選舉，並提供一致路由。 可靠性子系統，同盟子系統中，最上層負責可靠性的服務布料的轉印圖樣服務，例如複製、 資源管理及容錯移轉機制。 同盟子系統也確實裝載和啟動子系統，管理單一節點上的應用程式的生命週期。 管理子系統管理應用程式和服務的生命週期。 可測試性子系統可協助測試其服務透過模擬的錯誤之前和之後部署生產環境的應用程式與服務的應用程式開發人員。 服務布料的轉印圖樣能夠解決透過其通訊子系統服務位置。 若要啟用工具應用程式模型以及這些子系統上層公開開發應用程式撰寫模型。

## <a name="transport-subsystem"></a>傳輸子系統
傳輸子系統實作點對點資料流通訊通道。 此頻道適用於服務布料的轉印圖樣叢集內的通訊和服務布料的轉印圖樣叢集和用戶端之間的通訊。 支援單向和要求回覆通訊模式實作廣播 」 和 「 多點傳送同盟圖層中提供的基礎。 傳輸子系統保護通訊使用 X509 憑證或 Windows 安全性群組。 此子系統由服務布料的轉印圖樣，而且不會直接存取應用程式開發人員。

## <a name="federation-subsystem"></a>同盟子系統
若要在分散式系統理解一組節點，您需要具有系統的一致的檢視。 同盟子系統使用傳輸子系統提供的通訊基本，並將可以理解單一整合叢集 stitches 不同的節點。 它會提供所需的其他子系統-偵測、 前置字元選舉和一致路由分散式的系統基本項目。 同盟子系統內建 128 位元的權杖空格分散式雜湊表格的上方。 子系統建立撥打拓撲透過節點，每個中的節點撥打給分派的權杖空間的子集合的擁有權。 失敗偵測圖層會使用根據心打和仲裁租用機制。 同盟子系統也可透過錯綜複雜加入和離開通訊協定單一擁有者的權杖存在於隨時保證。 這會提供前置字元選舉和一致的路由保證。

## <a name="reliability-subsystem"></a>可靠性子系統
可靠性子系統提供提供服務布料的轉印圖樣服務的狀態高度_複寫_、_容錯移轉管理員_] 和_資源平衡器_機制。

* 複寫可確保主要服務複本中的狀態變更自動複製到次要複本，維護服務複本集主要和次要複本之間的一致性。 複寫負責仲裁管理製作複本集中的複本。 互動的容錯移轉單位，取得清單的作業進行複製，然後重新設定代理程式的複本設定的設定可讓。 設定指示作業需要複寫哪一個複本。 服務架構提供稱為布料的轉印圖樣複寫，可讓程式設計模型 API，讓服務狀態，高可用及可靠預設複寫器。
* 容錯移轉管理員可確保時節點新增到清單或從中叢集，會自動載入散發可用的節點。 如果在叢集節點失敗，請叢集會自動重新設定服務複本至維持的可用性。
* 資源管理員會在叢集失敗網域的 [服務複本，並可確保所有的容錯移轉單位的操作。 資源管理員也會在基礎的共用資料庫，達到最佳統一載入分配叢集節點平衡服務資源。

## <a name="management-subsystem"></a>管理子系統
管理子系統提供的端對端服務與應用程式生命週期管理。 PowerShell cmdlet 和管理的 Api 可讓您佈建部署、 更新、 升級，，就能取消佈建應用程式的可用性而不會遺失。 管理子系統執行此透過下列服務。

* **叢集管理員**︰ 這是互動容錯移轉經理的從可靠性置於根據服務位置限制節點的應用程式的主索引服務。 資源管理員容錯移轉子系統中可確保限制式不會中斷。 叢集管理員會從取消佈建佈建管理應用程式的生命週期。 它整合與狀況經理，以確保的應用程式的可用性不會遺失語意狀況觀點升級期間。
* **狀況管理員**︰ 這項服務可讓您可以監視的應用程式、 服務與叢集實體的狀況。 叢集項目 （例如節點、 服務分割和複本） 可以報告健康狀態資訊，然後彙總集中的狀況存放區。 此狀況資訊提供的服務與分散到多個節點叢集，讓您可以採取任何所需的矯正節點的整體的時間點狀況快照集。 狀況子系統報告 Api 可讓您在查詢狀況事件的狀況查詢。 狀況查詢 Api 傳回狀況存放區 」 或 「 彙總中儲存的原始的狀況資料解譯特定叢集實體狀況資料。
* **圖像市集**︰ 這項服務提供儲存與發佈的應用程式的二進位檔案。 這項服務，提供簡單分散式的檔案儲存要上傳及下載從應用程式的位置。


## <a name="hosting-subsystem"></a>主機子系統
叢集管理員通知服務需要管理特定節點的主機服務子系統 （每個節點執行）。 主機子系統然後管理該節點的應用程式的生命週期。 它與可靠性和健康情況的元件，以確保複本的位置是正確和狀況良好的互動。

## <a name="communication-subsystem"></a>通訊子系統
此子系統提供可靠的訊息中叢集和服務探索命名服務。 命名服務服務名稱解析叢集中的位置，並讓使用者管理服務名稱和內容。 使用命名服務，用戶端可以安全地與通訊叢集解決服務名稱，並可擷取服務中繼資料中的任何節點。 使用簡單的命名用戶端 API，服務和用戶端能夠解析目前網路位置還是節點生動或重新調整大小的叢集可以開發服務布料的轉印圖樣的使用者。

## <a name="testability-subsystem"></a>可測試性子系統
可測試性是專為測試內建在服務布料的轉印圖樣的服務設計工具套件。 工具可讓開發人員輕鬆地產生有意義的錯誤，並執行測試案例並驗證的許多狀態與服務整個存留期間，所有控制和安全的方式，會遇到的轉場效果。 可測試性也會提供更長的時間測試可以逐一查看執行透過各種可能會失敗，而不遺失可用性機制。 可讓您測試中生產環境。
